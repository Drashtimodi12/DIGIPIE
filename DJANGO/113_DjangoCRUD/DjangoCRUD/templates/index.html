{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Register</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <h1>Employee Registration Form</h1>
    <img src="{% static 'img/flower.jpg' %}" alt="flower" width="100" height="100">
    <hr>
    <!-- For display success or error msg show -->
    {{msg}}

    <form action="{% url 'emp_register' %}" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
        
            <!-- Hidden field for update -->
            <input type="hidden" value="{{emp.id}}" name="id">


        <label>Employee Name</label>
        <input type="text" name="EMP_NAME" id="name" placeholder="Name" value="{{emp.EMP_NAME}}" required>
        <br><br>

        <label>Employee Email</label>
        <input type="email" name="EMAIL" id="email" placeholder="Email" value="{{emp.EMAIL}}" required>
        <br><br>

        <label>Phone Number</label>
        <input type="text" name="PHONE_NUMBER" pattern="[0-9]{10}" maxlength="10" minlength="10" inputmode="numeric" placeholder="Enter 10 digit phone number"
                id="phone" value="{{emp.PHONE_NUMBER}}" required>
        <br><br>

        <label>Age</label>
        <input type="number" name="AGE" id="age" placeholder="age" value="{{emp.AGE}}" required>
        <br><br>

        <label>Employee Photo</label>
        <input type="file" name="EMP_PHOTO">
        <br>
        {% if emp and emp.EMP_PHOTO %}
            <div>
                <label>Current Photo:</label>
                <img src="{{ emp.EMP_PHOTO.url }}" alt="{{ emp.EMP_NAME }}" width="100" height="100">
            </div>
        {% endif %}
        <br><br>

        <input type="submit" value="{% if emp %}Update{% else %}Register{% endif %}">
    </form>

    <br><br>
    <h1>Employee Details</h1>
    <br>
        <table border="1" cellpadding="5">
            <tr>
                <td>EMP_ID</td>
                <td>EMP_NAME</td>
                <td>EMAIL</td>
                <td>PHONE_NUMBER</td>
                <td>AGE</td>
                <td>IMAGE</td>
                <td colspan="2">Action</td>
            </tr>

            {% for e in allEmp %}
            <tr>
                <td>{{e.id}}</td>
                <td>{{e.EMP_NAME}}</td>
                <td>{{e.EMAIL}}</td>
                <td>{{e.PHONE_NUMBER}}</td>
                <td>{{e.AGE}}</td>

                <td>
                    {% if e.EMP_PHOTO %}
                        <img src="{{e.EMP_PHOTO.url}}" alt="{{ e.EMP_NAME }}" width="100" height="100">
                    {% else %}
                        No IMAGE
                    {% endif %}
                </td>
                
                <td><a href="{% url 'emp_update' %}?emp_id={{e.id}}">Update</a></td>
                <td><a href="{% url 'emp_delete' %}?emp_id={{e.id}}">Delete</a></td>

            </tr>
            {% endfor %}
        </table>

</body>
</html>